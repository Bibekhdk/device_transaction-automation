{"name": "9-Step Device Registration to Transaction Flow", "status": "passed", "description": "\n        EXACT 9-STEP PLAN:\n        1. Admin Portal Login\n        2. Register New Device (hardcoded serial)\n        3. Send DPS Request\n        4. TMS Portal Login\n        5. Create Test Merchant (generates merchant_code, merchant_id)\n        6. Sync IPN\n        7. Assign Device to Merchant (generates terminal_id, store_id)\n        8. Send Transaction Notifications (USES DATA FROM STEPS 5 & 7)\n        9. Verify in MongoDB\n        ", "steps": [{"name": "Step 1: Login to Admin Portal", "status": "passed", "start": 1766080619789, "stop": 1766080619790}, {"name": "Step 2: Register New Device", "status": "passed", "steps": [{"name": "Complete Device Registration with Toast Capture", "status": "passed", "steps": [{"name": "Login to Admin Portal", "status": "passed", "attachments": [{"name": "login_success", "source": "f7b2683f-e979-49af-959b-bb1998c96780-attachment.png", "type": "image/png"}], "start": 1766080619791, "stop": 1766080629192}, {"name": "Navigate to Device Section", "status": "passed", "start": 1766080629192, "stop": 1766080631761}, {"name": "Open Add Device Form", "status": "passed", "attachments": [{"name": "form_opened", "source": "f8381874-bd56-45ee-af60-7a8734af18bc-attachment.png", "type": "image/png"}], "start": 1766080631761, "stop": 1766080635976}, {"name": "Fill Device Form", "status": "passed", "attachments": [{"name": "form_filled", "source": "35466301-0234-4f75-954a-82c83290115e-attachment.png", "type": "image/png"}], "parameters": [{"name": "customer", "value": "'Test'"}], "start": 1766080635976, "stop": 1766080643518}], "parameters": [{"name": "customer", "value": "'Test'"}], "start": 1766080619790, "stop": 1766080662111}], "start": 1766080619790, "stop": 1766080662111}, {"name": "Step 3: Send DPS Request", "status": "passed", "steps": [{"name": "Send DPS request for device '38231105960007'", "status": "passed", "parameters": [{"name": "serial_number", "value": "'38231105960007'"}], "start": 1766080662112, "stop": 1766080665659}, {"name": "Verify DPS response", "status": "passed", "parameters": [{"name": "response", "value": "{'key': 'YdZp8VnGdyWkZcfk+FrTqLxgZ6pfB/zOd4peQy+FdQ8=', 'host': 'koili-iot-staging.azure-devices.net'}"}, {"name": "serial_number", "value": "'38231105960007'"}], "start": 1766080665660, "stop": 1766080665660}], "start": 1766080662111, "stop": 1766080665660}, {"name": "Step 4: Login to TMS Portal", "status": "passed", "steps": [{"name": "Login to TMS Portal", "status": "passed", "attachments": [{"name": "tms_login_success", "source": "8a29240d-282d-474c-896d-a82ff3d1bfb9-attachment.png", "type": "image/png"}], "parameters": [{"name": "username", "value": "None"}, {"name": "password", "value": "None"}], "start": 1766080665660, "stop": 1766080674364}], "start": 1766080665660, "stop": 1766080674364}, {"name": "Step 5: Create Test Merchant", "status": "passed", "steps": [{"name": "Add New Merchant", "status": "passed", "attachments": [{"name": "merchant_filled", "source": "1b235776-c711-458a-8cda-b8c443c82e7c-attachment.png", "type": "image/png"}, {"name": "toast_1766080692", "source": "b76edc7f-c45d-4a49-becc-62304238c186-attachment.png", "type": "image/png"}], "parameters": [{"name": "merchant_data", "value": "{'account_number': '906086761844236', 'merchant_pan': 'PAN73358', 'branch': 'ACHHAM', 'schemes': ['Fonepay', 'NCHL'], 'merchant_code': 'M6999899829', 'merchant_id': 'F4257997970', 'name': 'Test_Merchant_20251218_234159', 'email': 'brownalexandra@example.com', 'address': 'Kathmandu', 'phone': '9882774875'}"}], "start": 1766080674367, "stop": 1766080693473}], "start": 1766080674364, "stop": 1766080693473}, {"name": "Step 6: Sync IPN", "status": "passed", "steps": [{"name": "Sync IPN", "status": "passed", "attachments": [{"name": "toast_1766080698", "source": "bb78bef7-e648-4631-86c1-c0f6b15a516c-attachment.png", "type": "image/png"}], "start": 1766080693474, "stop": 1766080699628}], "start": 1766080693473, "stop": 1766080704629}, {"name": "Step 7: Assign Device to Merchant", "status": "passed", "steps": [{"name": "Assign IPN to Merchant", "status": "passed", "steps": [{"name": "Sync IPN", "status": "passed", "attachments": [{"name": "toast_1766080710", "source": "69b8f7c9-fc9e-4556-bf02-66af4a1e087f-attachment.png", "type": "image/png"}], "start": 1766080704953, "stop": 1766080711244}], "attachments": [{"name": "toast_1766080737", "source": "5e7a7dbb-326b-43f0-b0af-985eaeba3018-attachment.png", "type": "image/png"}], "parameters": [{"name": "ipn_serial", "value": "'38231105960007'"}, {"name": "terminal_data", "value": "{'terminal_id': 'TERM_80614886', 'store_id': 'STORE_755203', 'fonepay_pan': '213173398573756', 'fonepay_terminal_id': 'FONEPAY_80063887'}"}], "start": 1766080704630, "stop": 1766080738287}], "start": 1766080704629, "stop": 1766080738287}, {"name": "Step 8: Send Transaction Notifications", "status": "passed", "steps": [{"name": "Send transaction notification", "status": "broken", "statusDetails": {"message": "requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://ipn-dev.qrsoundboxnepal.com/api/v1-stg/notify\n", "trace": "  File \"/home/bibek-hadkhale/Desktop/device_transaction-automation/devvenv/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/bibek-hadkhale/Desktop/antittest/api/ipn_api.py\", line 77, in send_transaction\n    response = self.post(endpoint, json=payload)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/bibek-hadkhale/Desktop/antittest/api/base_api.py\", line 157, in post\n    response = self._make_request('POST', endpoint, data=data, json=json, **kwargs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/bibek-hadkhale/Desktop/antittest/utils/helpers.py\", line 40, in wrapper\n    raise last_exception\n  File \"/home/bibek-hadkhale/Desktop/antittest/utils/helpers.py\", line 31, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/bibek-hadkhale/Desktop/antittest/api/base_api.py\", line 122, in _make_request\n    response.raise_for_status()\n  File \"/home/bibek-hadkhale/Desktop/device_transaction-automation/devvenv/lib/python3.12/site-packages/requests/models.py\", line 1021, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\n"}, "parameters": [{"name": "amount", "value": "872"}, {"name": "merchant_code", "value": "'M6999899829'"}, {"name": "merchant_id", "value": "None"}, {"name": "store_id", "value": "'STORE_755203'"}, {"name": "terminal_id", "value": "'TERM_80614886'"}], "start": 1766080738288, "stop": 1766080745800}, {"name": "Send transaction notification", "status": "broken", "statusDetails": {"message": "requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://ipn-dev.qrsoundboxnepal.com/api/v1-stg/notify\n", "trace": "  File \"/home/bibek-hadkhale/Desktop/device_transaction-automation/devvenv/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/bibek-hadkhale/Desktop/antittest/api/ipn_api.py\", line 77, in send_transaction\n    response = self.post(endpoint, json=payload)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/bibek-hadkhale/Desktop/antittest/api/base_api.py\", line 157, in post\n    response = self._make_request('POST', endpoint, data=data, json=json, **kwargs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/bibek-hadkhale/Desktop/antittest/utils/helpers.py\", line 40, in wrapper\n    raise last_exception\n  File \"/home/bibek-hadkhale/Desktop/antittest/utils/helpers.py\", line 31, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/bibek-hadkhale/Desktop/antittest/api/base_api.py\", line 122, in _make_request\n    response.raise_for_status()\n  File \"/home/bibek-hadkhale/Desktop/device_transaction-automation/devvenv/lib/python3.12/site-packages/requests/models.py\", line 1021, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\n"}, "parameters": [{"name": "amount", "value": "3000"}, {"name": "merchant_code", "value": "None"}, {"name": "merchant_id", "value": "'F4257997970'"}, {"name": "store_id", "value": "None"}, {"name": "terminal_id", "value": "'FONEPAY_80063887'"}], "start": 1766080745805, "stop": 1766080752578}], "start": 1766080738287, "stop": 1766080767581}, {"name": "Step 9: Verify in MongoDB", "status": "passed", "steps": [{"name": "Find device in device_registry", "status": "passed", "parameters": [{"name": "serial_number", "value": "'38231105960007'"}], "start": 1766080769047, "stop": 1766080769139}], "start": 1766080767581, "stop": 1766080769229}], "attachments": [{"name": "log", "source": "0e04dbf7-90b8-4aa0-9b45-04e5ab76c5a8-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "browser_name", "value": "'chromium'"}], "start": 1766080619789, "stop": 1766080769230, "uuid": "fdba41a2-23a8-469c-a376-aa66e32c6f3e", "historyId": "5b35e9c6aad5152e15912fbe2c5c6c65", "testCaseId": "f7356180d7fd61903349ae8104a31c1a", "fullName": "tests.test_full_flow.TestComplete9StepDeviceTransactionFlow#test_9_step_device_transaction_flow", "labels": [{"name": "severity", "value": "critical"}, {"name": "feature", "value": "Complete 9-Step Device Transaction Testing"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_full_flow"}, {"name": "subSuite", "value": "TestComplete9StepDeviceTransactionFlow"}, {"name": "host", "value": "bibek-hadkhale-HP-ProBook-440-G7"}, {"name": "thread", "value": "62953-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_full_flow"}]}